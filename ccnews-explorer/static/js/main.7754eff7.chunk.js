(this["webpackJsonpqsim-react"]=this["webpackJsonpqsim-react"]||[]).push([[0],{26:function(e,t,a){e.exports=a(48)},31:function(e,t,a){},32:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(11),s=a.n(i),l=(a(31),a(32),a(12)),o=a(8),c=a(16),u=a(15),m=a(49),h=a(7),p=a(10),d=a(6),y=(a(38),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={outputText:""},n.handleTextChange=function(){var e=n.state.keyStrokeSplit[n.state.keyStrokeIndex+1];return n.state.keyStrokeIndex+2<n.state.keyStrokeSplit.length&&(n.state.keyStrokeIndex+=2,n.state.keyStrokeTime=n.state.keyStrokeSplit[n.state.keyStrokeIndex]),n.timerID=setTimeout((function(){return n.handleTextChange()}),n.state.keyStrokeTime),n.setState({outputText:e+n.state.cursorText})},n.state.keyStrokeSplit=n.props.keyStrokeInfo.split("|"),n.state.syncStart=n.props.syncStart,n.state.currentTime=n.props.currentTime,n.state.mode=n.props.mode,n.state.browser=n.props.browser,n.state.summaryLength=n.props.summaryLength,n.state.device=n.props.device;var r=n.findKeyStrokeIndexOfFirstChange();return n.state.keyStrokeIndex=r,n.state.totalTime=n.computeTotalTime(r),n.state.keyStrokeTime=n.state.keyStrokeSplit[r],n.state.cursorText='<span class="cursor">|</span>',n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setTimeout((function(){return e.handleTextChange()}),this.state.keyStrokeTime)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerID)}},{key:"findKeyStrokeIndexOfFirstChange",value:function(){var e=this.state.syncStart?4:0;if(this.state.syncStart)for(var t=e;t<this.state.keyStrokeSplit.length;t++)if(t%2!=0&&""!=this.state.keyStrokeSplit[t])return t-1;return e}},{key:"computeTotalTime",value:function(e){for(var t=0,a=e;a<this.state.keyStrokeSplit.length;a++)a%2==0&&(t+=Number(this.state.keyStrokeSplit[a]));return t}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(e.currentTime>this.props.currentTime||e.syncStart!==this.props.syncStart){clearTimeout(this.timerID);var r=this.findKeyStrokeIndexOfFirstChange(),i=this.state.keyStrokeSplit[r];this.setState({keyStrokeIndex:r,currentTime:this.props.currentTime,keyStrokeTime:i,outputText:'<span class="cursor">|</span>',totalTime:this.computeTotalTime(r)}),this.timerID=setTimeout((function(){return n.handleTextChange()}),i)}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.syncStart!==t.syncStart?{syncStart:e.syncStart}:e.currentTime!==t.currentTime?{currentTime:e.currentTime,syncStart:e.syncStart}:null}}]),Object(o.a)(a,[{key:"render",value:function(){var e=r.a.createElement("p",null);"audio"==this.state.mode?e=r.a.createElement(d.a,{icon:h.c}):"image"==this.state.mode&&(e=r.a.createElement(d.a,{icon:h.b}));var t=r.a.createElement("p",null);"Chrome"==this.state.browser||"Chrome Mobile"==this.state.browser||"Chrome Mobile iOS"==this.state.browser||"Chromium"==this.state.browser?t=r.a.createElement(d.a,{icon:p.a}):"Edge"==this.state.browser?t=r.a.createElement(d.a,{icon:p.b}):"Firefox"==this.state.browser?t=r.a.createElement(d.a,{icon:p.c}):"Safari"==this.state.browser||"Mobile Safari"==this.state.browser?t=r.a.createElement(d.a,{icon:p.e}):"Opera"==this.state.browser&&(t=r.a.createElement(d.a,{icon:p.d}));var a=r.a.createElement("p",null);"Mobile"==this.state.device?a=r.a.createElement(d.a,{icon:h.d}):"PC"==this.state.device?a=r.a.createElement(d.a,{icon:h.a}):"Tablet"==this.state.device&&(a=r.a.createElement(d.a,{icon:h.f}));var n=r.a.createElement("p",null);return"long"==this.state.summaryLength?n=r.a.createElement("span",null,"L"):"short"==this.state.summaryLength?n=r.a.createElement("span",null,"S"):"title"==this.state.summaryLength&&(n=r.a.createElement("span",null,"T")),r.a.createElement("div",{className:"queryContainer"},r.a.createElement("span",{className:"textInnerBox"},r.a.createElement(m.a,{className:"progressBar",value:this.state.currentTime,max:this.state.totalTime})," ",e," ",t," ",a," ",n),r.a.createElement("div",{className:"queryBox"},r.a.createElement(d.a,{className:"searchIcon",icon:h.e}),r.a.createElement("span",{className:"textInnerBox",dangerouslySetInnerHTML:{__html:this.state.outputText}})))}}]),a}(n.Component)),k=a(50),E=a(51),S=a(52),g=a(53),v=a(54),f=a(55),T=a(56),b=a(57),x=(a(39),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleCurrentTimeUpdate=function(){var e=n.state.currentTime;null==e?n.setState({currentTime:0}):n.setState({currentTime:e+1e3})},n.state={qCount:12,topicId:n.props.topicId,syncStart:!0,showBackstories:!1,buttonText:n.getText(!1)},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("./joined/"+this.state.topicId+".json").then((function(e){return e.json()})).then((function(t){return e.setState({topicData:t})})),this.timerID=setInterval((function(){return e.handleCurrentTimeUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}}]),Object(o.a)(a,[{key:"getText",value:function(e){return e?"Hide Backstories":"Show Backstories"}},{key:"toggle",value:function(){this.setState({showBackstories:!this.state.showBackstories,buttonText:this.getText(!this.state.showBackstories)})}},{key:"handleTopicChange",value:function(e){var t=this;this.setState({topicData:null,topicId:e.target.value,currentTime:0}),void 0!=e.target.value&&e.target.value>0&&fetch("./joined/"+e.target.value+".json").then((function(e){return e.json()})).then((function(e){return t.setState({topicData:e})}))}},{key:"handleQCountChange",value:function(e){var t=this;clearInterval(this.timerID),this.timerID=setInterval((function(){return t.handleCurrentTimeUpdate()}),1e3),this.setState({qCount:e.target.value,currentTime:0})}},{key:"handleSyncChange",value:function(e){var t=this;clearInterval(this.timerID),this.timerID=setInterval((function(){return t.handleCurrentTimeUpdate()}),1e3),this.setState({syncStart:e.target.checked,currentTime:0})}},{key:"interleaveModalities",value:function(e,t,a){var n=[],i=[];for(t>e.length&&(t=e.length);n.length<t;)for(var s=0,l=["image","audio"];s<l.length;s++)for(var o=l[s],c=0,u=["title","short","long"];c<u.length;c++){for(var m=u[c],h=0;h<e.length;h++){var p=e[h];if(p.summary_modality==o&&p.summary_length==m&&!i.includes(p.uid)){i.push(p.uid),n.push(r.a.createElement(y,{key:p.uid,syncStart:this.state.syncStart,currentTime:a,mode:p.summary_modality,summaryLength:p.summary_length,device:p.device,browser:p.browser,keyStrokeInfo:p.typed_sequence}));break}}if(n.length==t)return n}return n}},{key:"render",value:function(){var e=r.a.createElement("p",null,"Loading"),t=r.a.createElement("p",null,"Loading"),a=r.a.createElement("p",null,"Loading"),n=r.a.createElement("p",null,"Loading"),i=r.a.createElement("p",null,"Loading"),s=r.a.createElement("p",null,"Loading"),l=r.a.createElement("p",null,"Loading"),o=r.a.createElement("p",null,"Loading");return void 0!=this.state.topicData&&(e=this.interleaveModalities(this.state.topicData.queries,this.state.qCount,this.state.currentTime),t=this.state.topicData.queries.length,a=this.state.topicData.doc_title,n=this.state.topicData.doc_summary_short,i=this.state.topicData.doc_summary_long,s=this.state.topicData.mean_length,l=this.state.topicData.unique_queries,o=this.state.topicData.unique_workers),r.a.createElement("div",null,r.a.createElement("div",{className:"topicInfoContainer"},r.a.createElement("img",{src:"cc.png",className:"logo",alt:"CC News Query Explorer"}),r.a.createElement("h2",{style:{color:"red"}},"BETA"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k.a,null,r.a.createElement(E.a,null,r.a.createElement("h4",{style:{color:"red"}},"Topic Selector"),r.a.createElement("b",null,"Topic"),": ",r.a.createElement("input",{type:"text",maxLength:"3",size:"3",name:"topic",value:this.state.topicId,onChange:this.handleTopicChange.bind(this)}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,a)),r.a.createElement(E.a,null,r.a.createElement("h4",{style:{color:"red"}},"Topic Statistics"),r.a.createElement("b",null,"Queries Submitted"),": ",t,r.a.createElement("br",null),r.a.createElement("b",null,"Mean Query Length (By Terms)"),": ",s,r.a.createElement("br",null),r.a.createElement("b",null,"Unique Query Count"),": ",l,r.a.createElement("br",null),r.a.createElement("b",null,"Unique Workers"),": ",o),r.a.createElement(E.a,null,r.a.createElement("h4",{style:{color:"red"}},"Control Panel"),r.a.createElement("b",null,"Number Of Queries"),": ",r.a.createElement("input",{type:"text",maxLength:"3",size:"3",name:"qCount",value:this.state.qCount,onChange:this.handleQCountChange.bind(this)}),r.a.createElement("br",null),r.a.createElement("b",null,"Sync Start Times"),": ",r.a.createElement("input",{type:"checkbox",name:"syncStart",checked:this.state.syncStart,onChange:this.handleSyncChange.bind(this)}),r.a.createElement("br",null),r.a.createElement(S.a,{color:"info",onClick:this.toggle.bind(this),style:{marginBottom:"1rem"}},this.state.buttonText))),r.a.createElement("br",null),r.a.createElement(g.a,{isOpen:this.state.showBackstories},r.a.createElement(v.a,null,r.a.createElement(f.a,{body:!0,outline:!0,color:"info"},r.a.createElement(T.a,{className:"text-center",tag:"h4"},"Short Summary"),r.a.createElement(b.a,null,n)),r.a.createElement(f.a,{body:!0,outline:!0,color:"info"},r.a.createElement(T.a,{className:"text-center",tag:"h4"},"Long Summary"),r.a.createElement(b.a,null,i))))),r.a.createElement("div",null,e))}}]),a}(n.Component));var C=function(){return r.a.createElement("div",null,r.a.createElement(x,{topicId:"1"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(47);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.7754eff7.chunk.js.map